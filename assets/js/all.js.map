{"version":3,"sources":["all.js"],"names":["game","Phaser","Game","AUTO","preload","create","update","ball","paddle","bricks","newBrick","brickInfo","scoreText","score","lives","livesText","lifeLostText","textStyle","font","fill","playing","startButton","scale","scaleMode","ScaleManager","SHOW_ALL","pageAlignHorizontally","pageAlignVertically","stage","backgroundColor","load","image","spritesheet","physics","startSystem","Physics","ARCADE","add","sprite","world","width","height","animations","anchor","set","button","startGame","enable","arcade","checkCollision","down","body","collideWorldBounds","bounce","immovable","checkWorldBounds","events","onOutOfBounds","ballLeaveScreen","text","visible","initBricks","collide","ballHitPaddle","ballHitBrick","x","input","count","row","col","offset","top","left","padding","group","c","r","brickX","brickY","brick","tween","to","y","Easing","Elastic","Out","setText","count_alive","i","children","length","alive","alert","location","reload","reset","onDown","addOnce","velocity","play","destroy"],"mappings":"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","file":"all.js","sourcesContent":["var game = new Phaser.Game(480, 320, Phaser.AUTO, null, {\r\n    preload: preload, \r\n    create: create, \r\n    update: update\r\n});\r\n\r\nvar ball;\r\nvar paddle;\r\nvar bricks;\r\nvar newBrick;\r\nvar brickInfo;\r\nvar scoreText;\r\nvar score = 0;\r\nvar lives = 3;\r\nvar livesText;\r\nvar lifeLostText;\r\nvar textStyle = { font: '18px Arial', fill: '#0095DD' };\r\nvar playing = false;\r\nvar startButton;\r\n\r\nfunction preload() {\r\n    game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n    game.scale.pageAlignHorizontally = true;\r\n    game.scale.pageAlignVertically = true;\r\n    game.stage.backgroundColor = '#333';\r\n    game.load.image('ball', 'assets/images/ball.png');\r\n    game.load.image('paddle', 'assets/images/paddle.png');\r\n    game.load.image('brick', 'assets/images/brick.png');\r\n    game.load.spritesheet('ball', 'assets/images/wobble.png', 20, 20);\r\n    game.load.spritesheet('button', 'assets/images/button.png', 120, 40);\r\n}\r\n\r\nfunction create() {\r\n    // * 初始化Arcade Physics引擎\r\n    game.physics.startSystem(Phaser.Physics.ARCADE);\r\n    // * 定義ball, sprite(x, y, name-loaded-in-preload() )\r\n    // ball = game.add.sprite(50, 50, 'ball');\r\n    ball = game.add.sprite(game.world.width*0.5, game.world.height-25, 'ball');\r\n    // animations.add('動畫名稱', 每禎顯示的順序, 禎速率)\r\n    ball.animations.add('wobble', [0,1,0,2,0,1,0,2,0], 24);\r\n    paddle = game.add.sprite(game.world.width*0.5, game.world.height-5, 'paddle');\r\n    paddle.anchor.set(0.5,1);\r\n    ball.anchor.set(0.5);\r\n    startButton = game.add.button(game.world.width*0.5, game.world.height*0.5, 'button', startGame, this, 1, 0, 2);\r\n    startButton.anchor.set(0.5);\r\n    \r\n    \r\n    // * 啟用\r\n    game.physics.enable(ball, Phaser.Physics.ARCADE);\r\n    game.physics.enable(paddle, Phaser.Physics.ARCADE);\r\n    game.physics.arcade.checkCollision.down = false;\r\n    \r\n    // * 設定邊界 => 球不會超過邊界\r\n    ball.body.collideWorldBounds = true;\r\n    ball.body.bounce.set(1);\r\n    paddle.body.immovable = true;\r\n    \r\n    // ball.body.velocity.set(150, -150);\r\n    // 重力\r\n    // ball.body.gravity.y = -500;\r\n    \r\n    ball.checkWorldBounds = true;\r\n    // ball.events.onOutOfBounds.add(function(){\r\n    //     alert('Game over!');\r\n    //     location.reload();\r\n    // }, this);\r\n    ball.events.onOutOfBounds.add(ballLeaveScreen, this);\r\n\r\n    // * text(x, y, content, {style_attr: value})\r\n    scoreText = game.add.text(5, 5, 'Points: 0', textStyle);\r\n\r\n    livesText = game.add.text(game.world.width-5, 5, 'Lives: '+lives, textStyle);\r\n    livesText.anchor.set(1,0);\r\n    lifeLostText = game.add.text(game.world.width*0.5, game.world.height*0.5, 'Life lost, click to continue', textStyle);\r\n    lifeLostText.anchor.set(0.5);\r\n    lifeLostText.visible = false;\r\n\r\n    initBricks();\r\n}\r\n\r\nfunction update() {\r\n    game.physics.arcade.collide(ball, paddle, ballHitPaddle);\r\n    game.physics.arcade.collide(ball, bricks, ballHitBrick);\r\n    \r\n    if(playing) {\r\n        paddle.x = game.input.x || game.world.width*0.5;\r\n    }\r\n    // ball.x += 1;\r\n    // ball.y += 1;\r\n}\r\n\r\nfunction initBricks() {\r\n    brickInfo = {\r\n        width: 50,\r\n        height: 20,\r\n        count: {\r\n            row: 7,\r\n            col: 3\r\n        },\r\n        offset: {\r\n            top: 50,\r\n            left: 60\r\n        },\r\n        padding: 10\r\n    };\r\n    bricks = game.add.group();\r\n    for(var c=0; c<brickInfo.count.col; c++) {\r\n        for(var r=0; r<brickInfo.count.row; r++) {\r\n            var brickX = (r*(brickInfo.width+brickInfo.padding))+brickInfo.offset.left;\r\n            var brickY = (c*(brickInfo.height+brickInfo.padding))+brickInfo.offset.top;\r\n            newBrick = game.add.sprite(brickX, brickY, 'brick');\r\n            game.physics.enable(newBrick, Phaser.Physics.ARCADE);\r\n            newBrick.body.immovable = true;\r\n            newBrick.anchor.set(0.5);\r\n            bricks.add(newBrick);\r\n        }\r\n    }\r\n}\r\n\r\nfunction ballHitBrick(ball, brick) {\r\n    // brick.kill();\r\n    game.add.tween(brick.scale).to({x:0,y:0}, 500, Phaser.Easing.Elastic.Out, true, 100);\r\n    // var killTween = game.add.tween(brick.scale);\r\n    // killTween.to({x:0,y:0}, 200, Phaser.Easing.Linear.None);\r\n    // killTween.onComplete.addOnce(function(){\r\n    //     brick.kill();\r\n    // }, this);\r\n    // killTween.start();\r\n\r\n    score += 10;\r\n    scoreText.setText('Points: '+score);\r\n\r\n    var count_alive = 0;\r\n    for (var i = 0; i < bricks.children.length; i++) {\r\n        if (bricks.children[i].alive == true) {\r\n            count_alive++;\r\n        }\r\n    }\r\n    if (count_alive == 0) {\r\n        alert('You won the game, congratulations!');\r\n        location.reload();\r\n    }\r\n}\r\n\r\nfunction ballLeaveScreen() {\r\n    lives--;\r\n    if(lives) {\r\n        livesText.setText('Lives: '+lives);\r\n        lifeLostText.visible = true;\r\n        ball.reset(game.world.width*0.5, game.world.height-25);\r\n        paddle.reset(game.world.width*0.5, game.world.height-5);\r\n        game.input.onDown.addOnce(function(){\r\n            lifeLostText.visible = false;\r\n            ball.body.velocity.set(150, -150);\r\n        }, this);\r\n    }\r\n    else {\r\n        alert('You lost, game over!');\r\n        location.reload();\r\n    }\r\n}\r\n\r\nfunction ballHitPaddle(ball, paddle) {\r\n    ball.animations.play('wobble');\r\n    ball.body.velocity.x = -1*5*(paddle.x-ball.x);\r\n}\r\n\r\nfunction startGame() {\r\n    startButton.destroy();\r\n    ball.body.velocity.set(150, -150);\r\n    playing = true;\r\n}"]}